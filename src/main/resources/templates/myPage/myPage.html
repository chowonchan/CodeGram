<!DOCTYPE html>
<html lang="ko">
<head>
  <!-- HTML 문서의 문자 인코딩을 UTF-8로 설정합니다 (한국어 등 다양한 언어 지원). -->
  <meta charset="UTF-8">
  
  <!-- 화면 크기를 장치의 너비에 맞추고, 초기 확대 배율을 1로 설정합니다. (반응형 디자인) -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- 브라우저 탭에 표시될 제목을 설정합니다. -->
  <title>프로필 페이지</title>
  
  <!-- 외부 CSS 파일을 연결합니다. -->
  <link rel="stylesheet" href="/css/myPage/myPage-style.css"></link>
  <link rel="stylesheet" href="/css/header.css"></link>
  <link rel="stylesheet" href="/css/footer.css"></link>
</head>
<body>

  <main>
    <!-- 공통 헤더를 가져옵니다 (Thymeleaf 템플릿을 사용). -->
    <th:block class="header-container" th:replace="~{fragments/header :: header}"></th:block>

    <!-- 프로필 페이지의 전체 내용을 담는 컨테이너 -->
    <section class="profile-container">

      <!-- 프로필 헤더: 프로필 사진, 사용자 정보 등을 표시 -->
      <section class="profile-header">

        <!-- 프로필 이미지 영역 -->
        <form id="profileUploadForm" action="/myPage/profile" method="POST" enctype="multipart/form-data">
          <!-- 프로필 이미지 표시 (사용자가 업로드한 이미지나 기본 이미지) -->
          <div class="profile-image-area" id="profileImageArea">
            <!-- <img th:src="${session.loginMember.profileImg != null ? session.loginMember.profileImg : '/images/defaultImg.png'}"
                 id="profileImg"
                 alt="프로필 이미지"> -->
                 <img th:src="${member.profileImg != null ? member.profileImg : '/images/defaultImg.png'}" id="profileImg" alt="프로필 이미지">
          </div>
          <!-- 파일 입력 필드 (사용자가 이미지를 업로드할 때 사용, 화면에 보이지 않음) -->
          <input type="file" name="profileImg" id="imageInput" accept="image/*" style="display: none;">
        </form>
        
        <!-- 사용자 정보를 표시하는 영역 -->
        <div class="profile-info-container">
          <!-- 프로필 관련 버튼 -->
          <div class="profile-buttons" th:if="${session.loginMember?.memberNickname == nickname}">
              <h2 th:text="${member.memberNickname}">member_nickname</h2>
              <button class="profile-edit-button">프로필 편집</button>
              <button>보관된 스토리 보기</button>
              <button class="profile-setting-button">설정</button>
          </div>
          <p th:text="${member.memberName}">member_name</p>
          <!-- 프로필 정보 -->
          <div class="profile-info">
              <p>게시물 0 &nbsp;&nbsp; 팔로워 0만 &nbsp;&nbsp; 팔로우 0</p>
          </div>
      </div>
      

      </section>

      <!-- 프로필 소개글 영역 -->
      <div class="profile-bio">
        <!-- <span th:text="${session.loginMember.selfIntroduction}"></span> -->
        <span th:text="${member.selfIntroduction}"></span>
      </div>


      <!-- 탭 메뉴: 게시물/저장됨 -->
      <div class="tabs">
        <div class="tab active" id="myUploads">게시물</div>
        <div class="tab" id="saved">저장됨</div>
      </div>

      <!-- 게시물 그리드: 사용자가 업로드한 게시물 미리보기 -->
      <div id="postsContent" class="post-grid"></div>

    </section>
    
    
  </main>
  <!-- 공통 푸터를 가져옵니다 (Thymeleaf 템플릿을 사용). -->
  <th:block th:replace="~{fragments/footer :: footer}"></th:block> 

  <!-- 프로필 사진 바꾸기 모달 -->
  <div id="profileModal" class="modal">
    <!-- 모달 내부 콘텐츠 -->
    <div class="modal-content">
      <!-- 모달 제목 -->
      <h3>프로필 사진 바꾸기</h3>
      <!-- 모달 옵션 목록 -->
      <ul class="modal-options">
        <li id="uploadPhoto" class="option">사진 업로드</li>
        <li id="deletePhoto" class="option delete">현재 사진 삭제</li>
        <li id="cancelModal" class="option cancel">취소</li>
      </ul>
    </div>
  </div>

  <!-- 프로필 설정 모달 -->
  <div id="profileSettingModal" class="modal">
    <!-- 모달 내부 콘텐츠 -->
    <div class="modal-content">
      <!-- 모달 옵션 목록 -->
      <ul class="modal-options">
        <li id="notificationSetting" class="option notification">알림설정</li>
        <li id="followList" class="option follow">팔로우 목록</li>
        <li id="blockList" class="option block ">차단 목록</li>
        <li id="logout" class="option logout">로그아웃</li>
        <li id="cancleModal" class="option cancle">취소</li>
      </ul>
    </div>
  </div>

  <!-- JavaScript 파일을 연결합니다 (페이지의 동작 제어). -->
  <script src="/js/myPage/myPage.js"></script>
</body>
</html>
