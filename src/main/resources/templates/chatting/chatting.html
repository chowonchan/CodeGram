<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>

  <link rel="stylesheet" href="/css/chatting/chatting.css">
  <link rel="stylesheet" href="/css/header.css">
</head>

<body>

  <!-- í—¤ë” ì¡°ê° í¬í•¨ -->
  <!-- <th:block class="header-container" th:replace="fragments/header :: header"></th:block> -->


  <div class="chatting-area">
    <ul class="chatting-list">

      <h2 class="memberId" th:text="${session.loginMember.memberId}">ë‚´ ì•„ì´ë””
      </h2>
      <button class="sendMessage2"><img src="/images/writeBtn.png"></button>

      <br>
      <br>
      <br>
      <br>

      <h3 class="MessageTitle">ë©”ì‹œì§€</h3>

      
      <th:block th:each="chatRoom : ${chatRoomList}">

      

        <li class="chatting-item" th:chat-no="${chatRoom.chattingRoomNo}" th:partner-no="${chatRoom.partnerNo}">
          <div class="item-header">

            <div style="border-radius: 50%; object-fit: cover; border: 1px solid gray; overflow: hidden; display: flex;">

              <img th:if="${chatRoom.partnerProfile}" class="list-profile" th:src="${chatRoom.partnerProfile}">
  
              <img th:unless="${chatRoom.partnerProfile}" class="list-profile" th:src="@{/images/defaultImg.png}" > 
              
            </div>

          </div>
          <div class="item-body">
            <p>
              <span class="partner-name" th:text="${chatRoom.partnerName}">ìƒëŒ€ë°© ì´ë¦„</span>
              <span class="recent-send-time" th:text="${chatRoom.sendTime}">ë©”ì„¸ì§€ ë³´ë‚¸ ì‹œê°„</span>
            </p>
            <div style="width: 50px;">
              <p class="recent-message" th:text="${chatRoom.lastMessage}">ë©”ì„¸ì§€ ë‚´ìš©</p>
              <p th:if="${chatRoom.notReadCount > 0}" class="not-read-count" th:text="${chatRoom.notReadCount}"></p>
            </div>
          </div>
        </li>

      </th:block>
    </ul>


    <div class="chat-container">

      <div class="DMLogo-container">
        <div class="DMLogo">
          <img src="/images/DMLOGO.png" class="DMLogo">
        </div>

        <h2 class="my-message">ë‚´ ë©”ì‹œì§€</h2>
        <h4>ì¹œêµ¬ë‚˜ ê·¸ë£¹ì— ë¹„ê³µê°œ ì‚¬ì§„ê³¼ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ ë³´ì„¸ìš”</h4>
        <button class="sendMessage" id="sendMessageBtn">ë©”ì‹œì§€ ë³´ë‚´ê¸°</button>
      </div>




      <!-- ë©”ì‹œì§€ë“¤ì´ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
      <ul class="chat-messages" id="chatMessages">

      </ul>




      
      <div class="chat-input">
        <label class="upload-label" for="imageUpload">ğŸ“·</label>
        <input type="file" id="imageUpload" class="image-upload" accept="image/*">
        <img id="imagePreview" class="image-preview">
        <input type="text" class="message-input" id="inputChatting" placeholder="ë©”ì‹œì§€ ë³´ë‚´ê¸°...">
      </div>
    </div>
  </div>





  <div class="modal-overlay" id="chattingSearchMember">
    <div class="modal-container">
      <div class="modal-header">
        <div class="modal-title">ìƒˆë¡œìš´ ë©”ì‹œì§€</div>
        <div style="width: 24px;"></div>
        <button class="close-button">âœ•</button>
      </div>

      <div class="modal-search">
        <input type="text" class="search-input" placeholder="ë°›ëŠ” ì‚¬ëŒ" autocomplete="off">
      </div>

      <div class="modal-content">
        <div class="no-results">ì œì•ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>
        <div class="search-results"></div>
      </div>

      <div class="modal-footer">
        <button class="send-button" disabled>ì±„íŒ…</button>
      </div>
    </div>
  </div>

	<script th:inline="javascript">
		const userDefaultImage = /*[[@{/images/defaultImg.png}]]*/ 'ê¸°ë³¸ ì´ë¯¸ì§€';

    const loginMemberNo = /*[[${session.loginMember?.memberNo}]]*/ 'ë¡œê·¸ì¸ íšŒì› ë²ˆí˜¸';
    const loginMemberNickname = /*[[${session.loginMember?.memberNickname}]]*/ 'ë¡œê·¸ì¸ íšŒì› ë‹‰ë„¤ì„';
	</script>

  <script src="/js/chatting/chatting.js"></script>



</body>

</html>